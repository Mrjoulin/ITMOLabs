ORG 0x512

BEGIN: CLA
	CALL CHECK_OUTPUT
	LD (CURRENT_SYMBOL)+
	ST REMAIN
	OUT 2

MAIN: CALL CHECK_OUTPUT
	LD (CURRENT_SYMBOL)
	SWAB
	OUT 2
	CALL COUNTER

	CALL CHECK_OUTPUT
	LD (CURRENT_SYMBOL)+
	OUT 2
	CALL COUNTER
	JUMP MAIN

CHECK_OUTPUT: IN 3
	AND #0x40
	BEQ CHECK_OUTPUT
	RET

COUNTER: LOOP REMAIN
	RET
	HLT

CURRENT_SYMBOL: WORD 0x5A1
REMAIN: WORD 0x000

ORG 0x5A1
	WORD 0x007
	WORD 0xB6E3
	WORD 0xE0DD
	WORD 0xD0DB
	WORD 0x2D00
